<html>
  <head>
      <meta http-equiv="content-type" content="text/html; charset=utf-8" />
      <meta http-equiv="content-language" content="en" />
      <meta name="description" content="ActionHero.js" />
      <link rel="stylesheet" href="/public/css/cosmo.css" type="text/css">
      <link rel="icon" href="/public/favicon.ico">
    <title>Fitbit Auth</title>
    <script src="/public/javascript/ActionheroWebsocketClient.min.js"></script>
  </head>
  <body>
    <div class="container">
      <a id="authLink" href="">Fitbit Auth</a>
    </div>

    <script type="text/javascript">
      var client = new ActionheroWebsocketClient();
      client.action('getAuthUrl', {client: 'fitbit'}, data => {
        if (data.error) {
          window.alert(data.error)
        }

        document.getElementById('authLink').setAttribute('href', data.url)
      })
    </script>
  </body>
</html>